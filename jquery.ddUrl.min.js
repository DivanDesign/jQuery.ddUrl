/**
 * jQuery ddUrl Plugin
 * @version 1.3 (2015-03-24)
 * 
 * @desc Библиотека для работы с URL.
 * 
 * @uses jQuery 1.7.2
 * 
 * @copyright 2015, DivanDesign
 * http://www.DivanDesign.biz
 */

(function(d){d.ddUrl={current:{},parseQuery:function(a){var e={};if(0<a.length){a=a.split("&");for(var f=0;f<a.length;f++){var c=a[f].split("="),b=c[0],c=c[1]||"";"[]"==b.substr(-2)?(b=b.substr(0,b.length-2),d.isArray(e[b])?e[b].push(c):e[b]=[c]):e[b]=c}}return e},parse:function(a){"string"!=d.type(a)&&(a=window.location.toString());a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(decodeURI(a));
a={full:"",protocol:a[1]||window.location.protocol.replace(":",""),host:a[6]||"",port:a[7]||"",relative:a[8],path:a[9],query:this.parseQuery(a[12]||""),queryString:a[12]||"",hash:this.parseQuery(a[13]||""),hashString:a[13]||"",internal:!1};""!=a.host?-1==a.host.search(/\.[^\.]+/)&&(a.relative="/"+a.host+a.relative,a.host=window.location.hostname):a.host=window.location.hostname;a.host==window.location.hostname&&(a.internal=!0);a.full=a.protocol+"://"+a.host+(""!=a.port?":"+a.port:"")+a.relative;return a}};
d.ddUrl.current=d.ddUrl.parse()})(jQuery);