/**
 * jQuery ddUrl Plugin
 * @version 1.4 (2015-04-27)
 * 
 * @desc Библиотека для работы с URL.
 * 
 * @uses jQuery 1.7.2
 * 
 * @copyright 2015, DivanDesign
 * http://www.DivanDesign.biz
 */

(function(d){d.ddUrl={current:{},parseQuery:function(a){function g(a,b,c){d.isArray(a[b])?a[b].push(c):a[b]=c}function n(a){var b={};d.each(a,function(a,d){b[a]=d});return b}function m(a,b,c,e){var f=a.shift();f?(b[c]||(b[c]=[]),"]"==f?g(b,c,e):(-1!=f.indexOf("]")&&(f=f.substr(0,f.length-1)),!d.isNumeric(f)&&d.isArray(b[c])&&(b[c]=n(b[c])),m(a,b[c],f,e))):g(b,c,e)}var h={result:{}};if(0<a.length){a=a.split("&");for(var k=0;k<a.length;k++){var e=a[k].split("="),l=e[0],e=e[1]||"";-1==l.indexOf("[")?
g(h.result,l,e):m(l.split("["),h,"result",e)}}return h.result},parse:function(a){"string"!=d.type(a)&&(a=window.location.toString());a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(decodeURI(a));a={full:"",protocol:a[1]||window.location.protocol.replace(":",""),host:a[6]||"",port:a[7]||"",relative:a[8],path:a[9],query:this.parseQuery(a[12]||""),queryString:a[12]||
"",hash:this.parseQuery(a[13]||""),hashString:a[13]||"",internal:!1};""!=a.host?-1==a.host.search(/\.[^\.]+/)&&(a.relative="/"+a.host+a.relative,a.host=window.location.hostname):a.host=window.location.hostname;a.host==window.location.hostname&&(a.internal=!0);a.full=a.protocol+"://"+a.host+(""!=a.port?":"+a.port:"")+a.relative;return a}};d.ddUrl.current=d.ddUrl.parse()})(jQuery);