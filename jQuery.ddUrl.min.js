/**
 * jQuery ddUrl Plugin
 * @version 1.5 (2015-07-27)
 * 
 * @desc Библиотека для работы с URL.
 * 
 * @requires jQuery 1.7.2
 * 
 * @copyright 2015, DivanDesign
 * http://www.DivanDesign.biz
 */

(function(b){b.ddUrl={current:{},parseQuery:function(a){function g(a,c,d){b.isArray(a[c])?a[c].push(d):a[c]=d}function n(a){var c={};b.each(a,function(a,b){c[a]=b});return c}function m(a,c,d,e){var f=a.shift();f?(c[d]||(c[d]=[]),"]"==f?g(c,d,e):(-1!=f.indexOf("]")&&(f=f.substr(0,f.length-1)),!b.isNumeric(f)&&b.isArray(c[d])&&(c[d]=n(c[d])),m(a,c[d],f,e))):g(c,d,e)}var h={result:{}};if(0<a.length){a=a.split("&");for(var k=0;k<a.length;k++){var e=a[k].split("="),l=e[0],e=e[1]||"";-1==l.indexOf("[")?
g(h.result,l,e):m(l.split("["),h,"result",e)}}return h.result},parse:function(a){"string"!=b.type(a)&&(a=window.location.toString());a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(decodeURI(a));a={full:"",protocol:a[1]||window.location.protocol.replace(":",""),host:a[6]||"",port:a[7]||"",relative:a[8],path:a[9],query:this.parseQuery(a[12]||""),queryString:a[12]||
"",hash:{},hashString:a[13]||"",internal:!1};0<a.hashString.length&&"/"!=a.hashString.charAt(0)&&(a.hash=this.parseQuery(a.hashString));""!=a.host?-1==a.host.search(/\.[^\.]+/)&&(a.relative="/"+a.host+a.relative,a.host=window.location.hostname):a.host=window.location.hostname;a.host==window.location.hostname&&(a.internal=!0);a.full=a.protocol+"://"+a.host+(""!=a.port?":"+a.port:"")+a.relative;return a}};b.ddUrl.current=b.ddUrl.parse();b(function(){(b.ddTools&&b.ddTools.$window||b(window)).on("popstate",
function(a){b.ddUrl.current=b.ddUrl.parse()})})})(jQuery);